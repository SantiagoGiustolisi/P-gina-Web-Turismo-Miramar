<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Consentimiento + WhatsApp</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{ --azul:#1e3a6d; --gris:#f3f5f8; --negro:#1b2635; }
    body{font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,sans-serif; margin:0; color:var(--negro); background:#fff;}
    .btn{
      display:inline-block; padding:.9rem 1.2rem; border-radius:12px; font-weight:700;
      background:var(--azul); color:#fff; text-decoration:none; border:none; cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease;
      box-shadow:0 8px 20px rgba(30,58,109,.18);
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(30,58,109,.22); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none; transform:none; }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; padding:20px; z-index:9999;
    }
    .modal{
      width:100%; max-width:560px; background:#fff; border-radius:16px; overflow:hidden;
      box-shadow:0 20px 60px rgba(0,0,0,.25);
      animation:pop .14s ease;
    }
    @keyframes pop{ from{transform:scale(.98); opacity:.6} to{transform:scale(1); opacity:1} }
    .modal-header{ padding:18px 20px; background:linear-gradient(135deg, #f8faff, #eef3ff); border-bottom:1px solid #e7eaf3; }
    .modal-title{ margin:0; font-size:1.1rem; font-weight:700; color:var(--azul); }
    .modal-body{ padding:20px; }
    .modal-actions{ display:flex; gap:10px; padding:16px 20px; background:var(--gris); }
    .close-x{ appearance:none; background:transparent; border:none; font-size:22px; line-height:1; cursor:pointer; color:#6b7480; }
    .consent{
      display:flex; align-items:flex-start; gap:10px; background:#fff; border:1px solid #e6e9f1; border-radius:12px; padding:14px; margin:14px 0 8px;
    }
    .consent small{ color:#5b6574; }
    .pill{
      display:inline-block; font-size:.75rem; letter-spacing:.04em; padding:.25rem .55rem; border-radius:999px; background:#eaf0ff; color:var(--azul); font-weight:700;
    }
    .muted{ color:#657086; }
    .hidden{ display:none !important; }
    .wrap{ max-width:780px; margin:60px auto; padding:0 18px; text-align:center; }
    .lead{ color:#445066; margin:.25rem 0 1.25rem; }
  </style>
</head>
<body>

  <main class="wrap">
    <span class="pill">Info</span>
    <h1 style="margin:.5rem 0 0">Recibir informaci√≥n</h1>
    <p class="lead">Te pedimos un consentimiento r√°pido y te abrimos WhatsApp con un mensaje listo para enviar.</p>

    <button id="openModalBtn" class="btn">Quiero recibir info</button>
  </main>

  <!-- MODAL -->
  <div id="backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title">Consentimiento para enviarte informaci√≥n</h2>
      </div>
      <div class="modal-body">
        <p>Hola üëã Para recibir novedades por WhatsApp, por favor acept√° los <a href="https://tusitio.com/tyc" target="_blank" rel="noopener">T√©rminos y Condiciones</a> y nuestra <a href="https://tusitio.com/tyc#privacidad" target="_blank" rel="noopener">Pol√≠tica de Privacidad</a>.</p>

        <label class="consent">
          <input type="checkbox" id="chkConsent">
          <small>Acepto los T√©rminos y Condiciones y autorizo a que me contacten por WhatsApp.</small>
        </label>

        <p class="muted" style="margin:.25rem 0 0;">Al continuar, se abrir√° WhatsApp con un mensaje listo para enviar.</p>
      </div>
      <div class="modal-actions">
        <button class="btn" id="continueBtn" disabled>Continuar por WhatsApp</button>
        <button class="close-x" id="closeBtn" aria-label="Cerrar">‚úï</button>
      </div>
    </div>
  </div>

<script>
  const WHATSAPP_NUMBER = "+54 9 3563 40-1392";   // tu n√∫mero en formato internacional

  function buildWaText(){
    // ‚úÖ Mensaje activador limpio
    return "Hola quiero informacion";
  }

  function openWhatsApp(url){
    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    if (isMobile) { location.href = url; }
    else { window.open(url, '_blank', 'noopener'); }
  }

  function goToWhatsApp(){
    const text = encodeURIComponent(buildWaText());

    // 1) endpoint m√°s estable
    const url1 = `https://api.whatsapp.com/send?phone=${WHATSAPP_NUMBER}&text=${text}`;
    // 2) fallback (por si acaso)
    const url2 = `https://wa.me/${WHATSAPP_NUMBER}?text=${text}`;

    try {
      openWhatsApp(url1);
      setTimeout(() => {
        if (document.visibilityState === 'visible') openWhatsApp(url2);
      }, 800);
    } catch {
      openWhatsApp(url2);
    }
  }

  // hooks UI
  const openModalBtn = document.getElementById('openModalBtn');
  const backdrop     = document.getElementById('backdrop');
  const closeBtn     = document.getElementById('closeBtn');
  const chkConsent   = document.getElementById('chkConsent');
  const continueBtn  = document.getElementById('continueBtn');

  function openModal(){ backdrop.style.display = 'flex'; }
  function closeModal(){ backdrop.style.display = 'none'; }

  openModalBtn.addEventListener('click', openModal);
  closeBtn.addEventListener('click', closeModal);
  backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeModal(); });
  chkConsent.addEventListener('change', ()=>{ continueBtn.disabled = !chkConsent.checked; });
  continueBtn.addEventListener('click', ()=>{ goToWhatsApp(); closeModal(); });
</script>

</body>
</html>
